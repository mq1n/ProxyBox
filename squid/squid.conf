# Basic squid config for forward proxy
http_port 3128
visible_hostname docker-squid


# Allow connections from local docker network and host
acl localnet src 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 127.0.0.1/32

# Standard safe/SSL ports and CONNECT method
acl SSL_ports port 443
acl Safe_ports port 80 21 443 70 210 280 488 591 777 1025-65535
acl CONNECT method CONNECT


# Authentication (optional) - uncomment and configure if you will use passwd file
# auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
# auth_param basic children 5
# auth_param basic realm Squid proxy-caching web server
# auth_param basic credentialsttl 2 hours
# acl auth_users proxy_auth REQUIRED


# Enforce safe ports and proper CONNECT destinations first
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports

# Allow local networks and then any client (consider restricting in production)
http_access allow localnet
http_access allow all
# If using authentication, require it (place allow rule above deny all)
# http_access allow auth_users

# Deny all other
http_access deny all


cache_mem 256 MB
access_log /var/log/squid/access.log
cache_log /var/log/squid/cache.log